{% extends 'base.html' %}
{% import 'components/breadcrumb.html' as breadcrumb %}
{% block breadcrumb %}
{{ breadcrumb.render([
  ('Bibliotecas', url_for('library.list_libraries')),
  (library.name, None)
]) }}
{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-start flex-column flex-sm-row gap-3 mb-4">
  <div>
    <h1 class="mb-0">{{ library.name }}</h1>
    {% if library.description %}
    <p class="text-muted mb-0">{{ library.description }}</p>
    {% endif %}
  </div>
  <a href="{{ url_for('library.edit_library', lib_id=library.id) }}" class="btn btn-outline-accent"><i class="bi bi-pencil"></i> Editar Biblioteca</a>
</div>
<div class="row">
  <div class="col-md-3 mb-4">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h6 class="mb-0">Pastas</h6>
      <a href="{{ url_for('folder.create_folder') }}?library_id={{ library.id }}" class="btn btn-sm btn-accent" aria-label="Nova Pasta"><i class="bi bi-folder-plus"></i></a>
    </div>
    <div class="d-grid gap-2">
      {% for folder in folders %}
      {% set item_count = folder.assets|length + folder.children|length %}
      {% include 'folder/_tile.html' %}
      {% else %}
      <p class="text-muted">Nenhuma pasta</p>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-9">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h6 class="mb-0">Arquivos recentes</h6>
    </div>
    {% if assets %}
    {% set assets = assets %}
    {% include 'asset/gallery.html' %}
    {% else %}
    <div class="text-center p-5 border rounded bg-light">
      <p class="lead mb-3">Nada aqui ainda. Fa√ßa seu primeiro upload!</p>
      <a href="{{ url_for('folder.create_folder') }}?library_id={{ library.id }}" class="btn btn-accent"><i class="bi bi-folder-plus"></i> Nova Pasta</a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
